syntax = "proto3";

package pb;

service DataNode{
    rpc UpploadChunks(stream Chunk) returns (Response);
    rpc DowloadChunks(RequestChunk) returns (Chunk);
    rpc ProposalRequest(Empty) returns (Response);
}

service NameNode{
    rpc FinalProposal(Proposal) returns (Empty);
    rpc FileRequest(Empty) returns (stream File);
    rpc AddressRquest(File) returns (ChunkAddress);
}

message Empty{
}

message Response{
    string response = 1;
}

message Proposal{
    string file_name = 1;
    string chunks_dn1 = 2;
    string chunks_dn2 = 3;
    string chunks_dn3 = 4;
}

message Chunk{
    string chunk_id = 1;
    bytes chunk = 2;
}

message RequestChunk{
    string chunk_id = 1;
}

message File{
    string fileName = 1;
}

message ChunkAddress{
    repeated string ip = 1;
}